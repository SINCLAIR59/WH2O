// ============================================
// üìä DATA.DART - ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡πâ‡∏≥
// ============================================
// ‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ô‡πâ‡∏≥
// ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡∏°‡∏µ Type Safety ‡πÅ‡∏•‡∏∞‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢
// ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:
// 1. ‡∏£‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô (temperature ‡πÄ‡∏õ‡πá‡∏ô double)
// 2. IDE ‡∏ä‡πà‡∏ß‡∏¢ autocomplete
// 3. ‡πÅ‡∏õ‡∏•‡∏á JSON ‡πÄ‡∏õ‡πá‡∏ô Object ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢
// ============================================

/// Model ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ô‡πâ‡∏≥
/// ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢: ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥, pH, ‡∏≠‡∏≠‡∏Å‡∏ã‡∏¥‡πÄ‡∏à‡∏ô, ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡πá‡∏°, ‡πÄ‡∏ß‡∏•‡∏≤‡∏ß‡∏±‡∏î
class WaterData {
  // ==========================================
  // Properties (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö)
  // ==========================================
  
  final int id;                // ‡∏£‡∏´‡∏±‡∏™‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
  final double temperature;    // ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥ (¬∞C)
  final double ph;             // ‡∏Ñ‡πà‡∏≤ pH (7.0 - 8.5)
  final double oxygen;         // ‡∏≠‡∏≠‡∏Å‡∏ã‡∏¥‡πÄ‡∏à‡∏ô‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏ô‡πâ‡∏≥ (mg/L)
  final double salinity;       // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡πá‡∏° (ppt)
  final DateTime measuredAt;   // ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏î

  // ==========================================
  // Constructor
  // ==========================================
  
  /// ‡∏™‡∏£‡πâ‡∏≤‡∏á WaterData object
  /// ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡πà‡∏≤‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ (required)
  WaterData({
    required this.id,
    required this.temperature,
    required this.ph,
    required this.oxygen,
    required this.salinity,
    required this.measuredAt,
  });

  // ==========================================
  // Factory Constructor
  // ==========================================
  
  /// ‡πÅ‡∏õ‡∏•‡∏á JSON (‡∏à‡∏≤‡∏Å API) ‡πÄ‡∏õ‡πá‡∏ô WaterData object
  /// 
  /// ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á JSON:
  /// {
  ///   "id": "1",
  ///   "temperature": "28.5",
  ///   "ph": "7.8",
  ///   "oxygen": "6.2",
  ///   "salinity": "15.3",
  ///   "measured_at": "2024-02-05 10:30:00"
  /// }
  factory WaterData.fromJson(Map<String, dynamic> json) {
    return WaterData(
      id: _toInt(json['id']),                      // ‡πÅ‡∏õ‡∏•‡∏á id ‡πÄ‡∏õ‡πá‡∏ô int
      temperature: _toDouble(json['temperature']), // ‡πÅ‡∏õ‡∏•‡∏á temperature ‡πÄ‡∏õ‡πá‡∏ô double
      ph: _toDouble(json['ph']),                   // ‡πÅ‡∏õ‡∏•‡∏á ph ‡πÄ‡∏õ‡πá‡∏ô double
      oxygen: _toDouble(json['oxygen']),           // ‡πÅ‡∏õ‡∏•‡∏á oxygen ‡πÄ‡∏õ‡πá‡∏ô double
      salinity: _toDouble(json['salinity']),       // ‡πÅ‡∏õ‡∏•‡∏á salinity ‡πÄ‡∏õ‡πá‡∏ô double
      measuredAt: DateTime.parse(json['measured_at']), // ‡πÅ‡∏õ‡∏•‡∏á string ‡πÄ‡∏õ‡πá‡∏ô DateTime
    );
  }

  // ==========================================
  // Helper Methods (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢)
  // ==========================================
  
  /// ‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏õ‡πá‡∏ô int
  /// ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á: int, double, String, null
  /// 
  /// ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
  /// _toInt(123) ‚Üí 123
  /// _toInt("456") ‚Üí 456
  /// _toInt(78.9) ‚Üí 78
  /// _toInt(null) ‚Üí 0
  static int _toInt(dynamic value) {
    if (value == null) return 0;           // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô null ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∑‡∏ô 0
    if (value is int) return value;        // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô int ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏•‡∏¢
    if (value is double) return value.toInt(); // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô double ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô int
    if (value is String) return int.parse(value); // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô String ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô int
    return 0;                              // ‡∏Å‡∏£‡∏ì‡∏µ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∑‡∏ô 0
  }

  /// ‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏õ‡πá‡∏ô double
  /// ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á: double, int, String, null
  /// 
  /// ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
  /// _toDouble(12.5) ‚Üí 12.5
  /// _toDouble("34.6") ‚Üí 34.6
  /// _toDouble(78) ‚Üí 78.0
  /// _toDouble(null) ‚Üí 0.0
  static double _toDouble(dynamic value) {
    if (value == null) return 0.0;         // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô null ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∑‡∏ô 0.0
    if (value is double) return value;     // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô double ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏•‡∏¢
    if (value is int) return value.toDouble(); // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô int ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô double
    if (value is String) return double.parse(value); // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô String ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô double
    return 0.0;                            // ‡∏Å‡∏£‡∏ì‡∏µ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∑‡∏ô 0.0
  }
}